{"ast":null,"code":"export const addData = function (storeName, data) {\n  let version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open('myDB', version);\n    request.onsuccess = () => {\n      console.log('request.onsuccess - addData', data, 'storeName--', storeName);\n      const db = request.result;\n      const tx = db.transaction(storeName, 'readwrite');\n      const store = tx.objectStore(storeName);\n      store.add(data);\n      resolve(data);\n    };\n    request.onerror = () => {\n      var _request$error;\n      const error = (_request$error = request.error) === null || _request$error === void 0 ? void 0 : _request$error.message;\n      if (error) {\n        resolve(error);\n      } else {\n        resolve('Unknown error');\n      }\n    };\n  });\n};","map":{"version":3,"names":["addData","storeName","data","version","Promise","resolve","reject","request","indexedDB","open","onsuccess","console","log","db","result","tx","transaction","store","objectStore","add","onerror","error","message"],"sources":["/home/jouleslabs/Downloads/Interview-task/react_ts_modal/src/DB/Actions/addProducts.ts"],"sourcesContent":["\nexport const addData = <T>(storeName: string, data: T, version = 1): Promise<T|string|null> => {\n    return new Promise((resolve, reject) => {\n     const request = indexedDB.open('myDB', version);\n  \n      request.onsuccess = () => {\n        console.log('request.onsuccess - addData', data, 'storeName--', storeName);\n       const  db = request.result;\n        const tx = db.transaction(storeName, 'readwrite');\n        const store = tx.objectStore(storeName);\n        store.add(data);\n        resolve(data);\n      };\n  \n      request.onerror = () => {\n        const error = request.error?.message\n        if (error) {\n          resolve(error);\n        } else {\n          resolve('Unknown error');\n        }\n      };\n    });\n  };"],"mappings":"AACA,OAAO,MAAMA,OAAO,GAAG,UAAIC,SAAiB,EAAEC,IAAO,EAA0C;EAAA,IAAxCC,OAAO,uEAAG,CAAC;EAC9D,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACvC,MAAMC,OAAO,GAAGC,SAAS,CAACC,IAAI,CAAC,MAAM,EAAEN,OAAO,CAAC;IAE9CI,OAAO,CAACG,SAAS,GAAG,MAAM;MACxBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEV,IAAI,EAAE,aAAa,EAAED,SAAS,CAAC;MAC3E,MAAOY,EAAE,GAAGN,OAAO,CAACO,MAAM;MACzB,MAAMC,EAAE,GAAGF,EAAE,CAACG,WAAW,CAACf,SAAS,EAAE,WAAW,CAAC;MACjD,MAAMgB,KAAK,GAAGF,EAAE,CAACG,WAAW,CAACjB,SAAS,CAAC;MACvCgB,KAAK,CAACE,GAAG,CAACjB,IAAI,CAAC;MACfG,OAAO,CAACH,IAAI,CAAC;IACf,CAAC;IAEDK,OAAO,CAACa,OAAO,GAAG,MAAM;MAAA;MACtB,MAAMC,KAAK,qBAAGd,OAAO,CAACc,KAAK,mDAAb,eAAeC,OAAO;MACpC,IAAID,KAAK,EAAE;QACThB,OAAO,CAACgB,KAAK,CAAC;MAChB,CAAC,MAAM;QACLhB,OAAO,CAAC,eAAe,CAAC;MAC1B;IACF,CAAC;EACH,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}